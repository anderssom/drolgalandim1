var thisTarget,isMTinterface;BroadcastChannel&&(thisTarget=window.TvrMT?"MTinterface":"outsideTab",MTBroadCast={BroadcastChannel:!1,observer:!1,thisTarget:thisTarget,isMTinterface:isMTinterface="MTinterface"===thisTarget,isOutsideTab:!isMTinterface,actionWhenVisible:!1,MTDynFrontData:!1,stat:{},init:function(e){MTBroadCast.isOutsideTab&&e&&(this.MTDynFrontData=e,this.listenForBuilderPublish()),this.createBroadcastChannel(),document.addEventListener("visibilitychange",MTBroadCast.visibilityChanged),this.BroadcastChannel.onmessage=function(e){!e||(e=e.data)&&e.update&&e.updateTarget===MTBroadCast.thisTarget&&(MTBroadCast.tabIsHidden()?MTBroadCast.actionWhenVisible=e:MTBroadCast.runAction(e))}},runAction:function(e){MTBroadCast.update[e.update](e),MTBroadCast.actionWhenVisible=!1},tabIsHidden:function(){return"hidden"===document.visibilityState},visibilityChanged:function(){"visible"===document.visibilityState&&setTimeout(function(){MTBroadCast.actionWhenVisible&&MTBroadCast.runAction(MTBroadCast.actionWhenVisible)},20)},createBroadcastChannel:function(){this.BroadcastChannel=new BroadcastChannel("microthemer")},broadcastChange:function(e){this.BroadcastChannel||this.createBroadcastChannel(),this.BroadcastChannel.postMessage(e)},closeBroadcast:function(){this.BroadcastChannel.close(),this.BroadcastChannel=!1,document.removeEventListener("visibilitychange",MTBroadCast.visibilityChanged)},toggleSyncBrowserTabs:function(e){e?MTBroadCast.init():MTBroadCast.closeBroadcast()},observeTarget:function(t,n){n.observerConfig=n.observerConfig||{};var e=new MutationObserver(function(e){e.forEach(function(e){n.item.apply(this,[t,e].concat(n.args||[]))})});e.observe(t,n.observerConfig),MTBroadCast.observer=e},disconnectObserver:function(){MTBroadCast.observer.disconnect()},docReady:function(e){"complete"===document.readyState||"interactive"===document.readyState?setTimeout(e,1):document.addEventListener("DOMContentLoaded",e)},observeDomChange:function(e,n,t,a,o,i){t=t||document,a=a||"class";e=t.querySelector(e);e&&MTBroadCast.observeTarget(e,{observerConfig:{attributeFilter:[a],subtree:o,childList:i},item:function(e,t){("class"===a&&e.classList.contains(n)||"style"===a&&e.style[n.property]===n.value||"disabled"===a&&e.disabled===n||"addedNodes"===a&&t.addedNodes.length&&t.addedNodes[0].classList&&t.addedNodes[0].classList.contains(n))&&MTBroadCast.BroadcastChannel.postMessage({update:"sitePreview",updateTarget:"MTinterface",MTDynFrontData:MTBroadCast.MTDynFrontData})}})},listenForBuilderPublish:function(){MTBroadCast.docReady(function(){MTBroadCast.stat.body=document.body;var e,t=document.body.dataset,n=!1,a=!1;document.documentElement.classList.contains("et-fb-app-frame")&&(n="divi"),t.hasOwnProperty("builderMode")?n="bricks":document.body.classList.contains("brz-ed")?n="brizy":document.body.classList.contains("znpb-editor-preview")?n="zion":"wppb-page-builder"===document.body.id?n="wppb":t.hasOwnProperty("elementorDeviceMode")?n="elementor":document.documentElement.classList.contains("fl-builder-is-showing-toolbar")?n="FLBuilder":"CTFrontendBuilder"===document.documentElement.getAttribute("ng-app")&&(n="oxygen"),n&&(e=MTBroadCast[n].click,a=MTBroadCast[n].observe,e&&document.addEventListener("click",e),a&&a())})},divi:{observe:function(){setTimeout(function(){MTBroadCast.observeDomChange("button.et-fb-button--save-draft",!1,window.parent.document,"disabled"),MTBroadCast.observeDomChange("button.et-fb-button--publish",!1,window.parent.document,"disabled")},4e3)}},bricks:{observe:function(){MTBroadCast.observeDomChange("#bricks-preview-message","show")}},elementor:{observe:function(){MTBroadCast.observeDomChange("#elementor-panel-saver-button-publish","elementor-disabled",window.parent.document)}},FLBuilder:{observe:function(){MTBroadCast.observeDomChange("div.fl-builder-bar","is-hidden",window.parent.document)}},oxygen:{observe:function(){MTBroadCast.observeDomChange("#ct-page-overlay",{property:"display",value:"none"},window.parent.document,"style")}},brizy:{observe:function(){setTimeout(function(){MTBroadCast.observeDomChange("div.brz-ed-fixed-bottom-panel__btn svg.brz-icon-svg","brz-d-none",window.parent.document)},2e3)}},zion:{observe:function(){MTBroadCast.observeDomChange(".znpb-editor-header__page-save-wrapper--save","znpb-editor-icon-wrapper",window.parent.document,"addedNodes",!0,!0)}},wppb:{observe:function(){setTimeout(function(){MTBroadCast.observeDomChange("#wppb-builder-page-tools","wppb-toastr-success",window.parent.document,"addedNodes",!0,!0)},2e3)}},update:{css:function(e){var t="reload="+(new Date).getTime(),n=e.gfURL,a="microthemer_g_font-css",o=document.getElementById(a),i=document.getElementById("microthemer-css")||document.querySelector('link[href*="micro-themes"]');i&&(i.href=e.mtURL+"?"+t),o&&!n?o.remove():!o&&n?((e=document.createElement("link")).id=a,e.href=n+"&"+t,e.rel="stylesheet",e.media="all",document.head.appendChild(e)):o&&n&&(o.href=n+"&"+t)},sitePreview:function(e){var t=window.TvrMT,n=t.MTF,a=t.TvrUi,o=n.getMTDynFrontData(),i=n.get_current_url(),t=decodeURIComponent(e.MTDynFrontData["iframe-url"]);o["page-id"]!==e.MTDynFrontData["page-id"]&&i!==t||(a.resumeIframeScroll={top:n.stat.win.scrollY,left:n.stat.win.scrollX,behaviour:"auto"},a.change_preview_url(a.stat.settingsMenu.find(".change-preview-url")))}}});